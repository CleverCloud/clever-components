import{L as e,h as t,c as i}from"./vendor-5e139a4e.js";import"./cc-button-0fc35634.js";import"./cc-toggle-8b8e589e.js";import"./cc-block-4351d64f.js";import"./cc-error-8d730ec3.js";import"./cc-block-section-d9dd6090.js";import{u as c,s as o}from"./utils-e732f1fc.js";import{PENDING_STATUSES as s,PROCESSING_STATUS as n,PROCESSED_STATUSES as l}from"./cc-invoice-table-7c70a25a.js";function r(e){const t=new Date(e).getUTCFullYear();return String(t)}class a extends e{static get properties(){return{error:{type:Boolean},invoices:{type:Array},_yearFilter:{type:Number}}}constructor(){super(),this.error=!1}_onYearFilterValue({detail:e}){this._yearFilter=e}render(){const e=null==this.invoices,i=e?[]:this.invoices.filter((e=>s.includes(e.status))),a=e?[]:this.invoices.filter((e=>e.status===n)),v=e?[]:this.invoices.filter((e=>l.includes(e.status))),u=v.map((e=>r(e.emissionDate))).reduce(...c).map((e=>String(e))),d=u.map((e=>({label:e,value:e}))).sort(o("label")),m=null==this._yearFilter?function(e){const t=e.map((e=>Number(e))),i=Math.max(...t);return String(i)}(u):this._yearFilter,g=v.filter((e=>r(e.emissionDate)===m));return t`<cc-block><div slot=title>Invoices</div>${this.error?"":t`<cc-block-section><div slot=title>Pending invoices</div>${e||i.length>0?t`<cc-invoice-table .invoices=${e?null:i}></cc-invoice-table>`:""} ${e||0!==i.length?"":t`<em>No pending invoices at the moment.</em>`}</cc-block-section>${!e&&a.length>0?t`<cc-block-section><div slot=title>Invoices awaiting payment validation</div><cc-invoice-table .invoices=${e?null:a}></cc-invoice-table></cc-block-section>`:""}<cc-block-section><div slot=title>Paid invoices</div>${!e&&g.length>0&&d.length>1?t`<cc-toggle legend=Year: .choices=${d} value=${m} @cc-toggle:input=${this._onYearFilterValue}></cc-toggle>`:""} ${e||g.length>0?t`<cc-invoice-table .invoices=${e?null:g}></cc-invoice-table>`:""} ${e||0!==g.length?"":t`<em>No paid invoices at the moment.</em>`}</cc-block-section>`} ${this.error?t`<cc-error>An error occured while loading invoices.</cc-error>`:""}</cc-block>`}static get styles(){return[i`:host{display:block}cc-toggle{justify-self:start}`]}}window.customElements.define("cc-invoice-list",a);export{a as CcInvoiceList};
