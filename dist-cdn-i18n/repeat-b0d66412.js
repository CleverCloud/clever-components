import{e,N as t,g as n,r as o,j as s}from"./vendor-5e139a4e.js";const r=(e,o)=>{const s=e.startNode.parentNode,r=void 0===o?e.endNode:o.startNode,l=s.insertBefore(n(),r);s.insertBefore(n(),r);const i=new t(e.options);return i.insertAfterNode(l),i},l=(e,t)=>(e.setValue(t),e.commit(),e),i=(e,t,n)=>{const s=e.startNode.parentNode,r=n?n.startNode:e.endNode,l=t.endNode.nextSibling;l!==r&&o(s,t.startNode,l,r)},a=e=>{s(e.startNode.parentNode,e.startNode,e.endNode.nextSibling)},d=(e,t,n)=>{const o=new Map;for(let s=t;s<=n;s++)o.set(e[s],s);return o},f=new WeakMap,N=new WeakMap,c=e(((e,n,o)=>{let s;return void 0===o?o=n:void 0!==n&&(s=n),n=>{if(!(n instanceof t))throw new Error("repeat can only be used in text bindings");const c=f.get(n)||[],u=N.get(n)||[],p=[],g=[],v=[];let w,h,b=0;for(const t of e)v[b]=s?s(t,b):b,g[b]=o(t,b),b++;let m=0,x=c.length-1,M=0,j=g.length-1;for(;m<=x&&M<=j;)if(null===c[m])m++;else if(null===c[x])x--;else if(u[m]===v[M])p[M]=l(c[m],g[M]),m++,M++;else if(u[x]===v[j])p[j]=l(c[x],g[j]),x--,j--;else if(u[m]===v[j])p[j]=l(c[m],g[j]),i(n,c[m],p[j+1]),m++,j--;else if(u[x]===v[M])p[M]=l(c[x],g[M]),i(n,c[x],c[m]),x--,M++;else if(void 0===w&&(w=d(v,M,j),h=d(u,m,x)),w.has(u[m]))if(w.has(u[x])){const e=h.get(v[M]),t=void 0!==e?c[e]:null;if(null===t){const e=r(n,c[m]);l(e,g[M]),p[M]=e}else p[M]=l(t,g[M]),i(n,t,c[m]),c[e]=null;M++}else a(c[x]),x--;else a(c[m]),m++;for(;M<=j;){const e=r(n,p[j+1]);l(e,g[M]),p[M++]=e}for(;m<=x;){const e=c[m++];null!==e&&a(e)}f.set(n,p),N.set(n,v)}}));export{c as r};
