import"./cc-tile-status-codes-59a2212e.js";import"./cc-smart-container-f668ab58.js";import{d as e,O as t,T as o}from"./request.fetch-17efde15.js";import{s as a,b as n}from"./send-to-api-3f46dae0.js";function s(e,...t){return[e,...t.filter((e=>null!=e)).map((e=>e.slice(0,10)))].join("__")}e({selector:"cc-tile-status-codes",params:{apiConfig:{type:Object},ownerId:{type:String},appId:{type:String,optional:!0}},onContextUpdate({context:e,updateComponent:r,signal:i}){const{apiConfig:p,ownerId:c,appId:d}=e;r("state",{type:"loading"}),async function({apiConfig:e,signal:r,ownerId:i,appId:p}){const c=await(d={orgaId:i},Promise.resolve({method:"get",url:`/v2/w10tokens/accessLogs/read/${d.orgaId}`,headers:{Accept:"application/json"}})).then(a({apiConfig:e,signal:r,cacheDelay:t}));var d;return function({warpToken:e,ownerId:t,appId:o}){const[a,n]=function(e,t){return null!=t?["app_id",t]:["owner_id",e]}(t,o),r=`'${e}' '${a}' '${n}' NOW 24 h @clevercloud/accessLogs_status_code_v1`;return Promise.resolve({method:"post",url:"/api/v0/exec",body:r,queryParams:{__:s("statuscodes",t,o)},responseHandler:([e])=>(delete e[-1],e)})}({warpToken:c,ownerId:i,appId:p}).then(n({apiConfig:e,signal:r,timeout:o}))}({apiConfig:p,signal:i,ownerId:c,appId:d}).then((e=>{r("state",{type:"loaded",statusCodes:e})})).catch((e=>{console.log(e),r("state",{type:"error"})}))}});
