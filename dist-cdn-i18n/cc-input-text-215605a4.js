import{L as e,d as t,h as i,a as s,i as o,s as r,c as n}from"./vendor-5e139a4e.js";import{d as a}from"./default-theme-fead272a.js";const l=new URL(new URL("assets/clipboard-bf8d5491.svg",import.meta.url).href,import.meta.url).href,d=new URL(new URL("assets/eye-closed-390597cc.svg",import.meta.url).href,import.meta.url).href,c=new URL(new URL("assets/eye-open-d3ed151c.svg",import.meta.url).href,import.meta.url).href,h=new URL(new URL("assets/tick-a5247ce9.svg",import.meta.url).href,import.meta.url).href;class p extends e{static get properties(){return{clipboard:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},label:{type:String},multi:{type:Boolean,reflect:!0},name:{type:String,reflect:!0},placeholder:{type:String},readonly:{type:Boolean,reflect:!0},secret:{type:Boolean,reflect:!0},skeleton:{type:Boolean,reflect:!0},tags:{type:Array},_tagsEnabled:{type:Boolean,attribute:!1},value:{type:String},_showSecret:{type:Boolean,attribute:!1},_copyOk:{type:Boolean,attribute:!1}}}constructor(){super(),this.clipboard=!1,this.disabled=!1,this.multi=!1,this.placeholder="",this.readonly=!1,this.secret=!1,this.skeleton=!1,this.tags=null,this.value="",this._copyOk=!1,this._showSecret=!1,this._tagsEnabled=!1,this._uniqueName=Math.random().toString(36).slice(2)}get tags(){return this._tagsEnabled?this.value.split(" ").filter((e=>""!==e)):null}set tags(e){if(this._tagsEnabled=null!=e,this._tagsEnabled){const t=this.tags;(function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(t.length!==e.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]!==t[i])return!1;return!0})(t,e)||(this.value=e.join(" "),this.requestUpdate("tags",t))}}focus(){this.shadowRoot.querySelector(".input").focus()}_onInput(e){if(this._tagsEnabled&&e.target.value.includes("\n")){const{selectionStart:t,selectionEnd:i}=e.target,s=e.target.value,o=e.target.value.replace(/\n/g,""),r=s.length-o.length;e.target.value=o,e.target.setSelectionRange(t-r,i-r)}this.value=e.target.value,t(this,"input",this.value),this._tagsEnabled&&t(this,"tags",this.tags)}_onFocus(e){this.readonly&&e.target.select()}_onClickCopy(){navigator.clipboard.writeText(this.value).then((()=>{this._copyOk=!0,setTimeout((()=>this._copyOk=!1),1e3)}))}_onClickSecret(){this._showSecret=!this._showSecret}_onKeyEvent(e){"keydown"!==e.type&&"keypress"!==e.type||e.stopPropagation(),this._tagsEnabled&&"keydown"===e.type&&13===e.keyCode&&(e.preventDefault(),t(this,"requestimplicitsubmit")),this.readonly||"keypress"!==e.type||13!==e.keyCode||(!this.multi||this.multi&&e.ctrlKey)&&t(this,"requestimplicitsubmit")}render(){const e=this.value??"",t=e.split("\n").length,r=this.clipboard&&!this.disabled&&!this.skeleton,n=this.secret&&!this.multi&&!this.disabled&&!this.skeleton,a=this.multi||this._tagsEnabled,p=e.split(" ").map(((e,t,s)=>i`<span class=tag>${e}</span>${t!==s.length-1?" ":""}`));return i`${null!=this.label?i`<label for=${this._uniqueName}>${this.label}</label>`:""}<div class=meta-input><div class="${s({skeleton:this.skeleton})} wrapper" @input=${this._onInput} @keydown=${this._onKeyEvent} @keypress=${this._onKeyEvent}>${a?i`${this._tagsEnabled&&!this.skeleton?i`<div class="input input-underlayer" style=--rows:${t}><div class=all-tags>${p}</div></div>`:""} <textarea id=${this._uniqueName} class="${s({"input-tags":this._tagsEnabled})} input" style=--rows:${t} rows=${t} ?disabled=${this.disabled||this.skeleton} ?readonly=${this.readonly} .value=${e} name=${this.name} placeholder=${this.placeholder} spellcheck=false wrap=${o(this._tagsEnabled?"soft":void 0)} @focus=${this._onFocus}></textarea>`:""} ${a?"":i`${r&&this.readonly?i`<div class="input input-mirror">${e}</div>`:""} <input id=${this._uniqueName} type=${this.secret&&!this._showSecret?"password":"text"} class=input ?disabled=${this.disabled||this.skeleton} ?readonly=${this.readonly} .value=${e} name=${this.name} placeholder=${this.placeholder} spellcheck=false @focus=${this._onFocus}>`}<div class=ring></div></div>${n?i`<button class=btn @click=${this._onClickSecret} title=${this._showSecret?"Hide secret":"Show secret"}><img class=btn-img src=${this._showSecret?d:c} alt=""></button>`:""} ${r?i`<button class=btn @click=${this._onClickCopy} title=Copy to clipboard><img class=btn-img src=${this._copyOk?h:l} alt=""></button>`:""}</div>`}static get styles(){return[a,r,n`:host{display:inline-block}:host([multi]){display:block}label{cursor:pointer;display:block;padding-bottom:.35em}.meta-input{box-sizing:border-box;display:inline-flex;position:relative;vertical-align:top;width:100%}:host([multi]) .meta-input{display:flex}.wrapper{display:grid;flex:1 1 0;margin:.15em .5em;min-width:0;overflow:hidden}.input{-webkit-appearance:none;background:0 0;border:1px solid #000;box-sizing:border-box;display:block;font-family:monospace;margin:0;padding:0;resize:none;width:100%;border:none;font-family:var(--cc-ff-monospace);font-size:.85em;grid-area:1/1/2/2;height:calc(var(--rows,1) * 2em);line-height:2em;overflow:hidden;z-index:2}.input::placeholder{font-style:italic}textarea:not([wrap]){white-space:pre}.input:active,.input:focus{outline:0}.input[disabled]{opacity:.75;pointer-events:none}.input-mirror{height:0}.input-tags,.input-underlayer{height:auto;padding:0 3px;word-break:break-all}.input-underlayer{color:transparent;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;white-space:pre-wrap;z-index:1}.input-underlayer .tag:not(:empty){--color:rgba(50, 50, 255, 0.15);background-color:var(--color);border-radius:3px;box-shadow:0 0 0 2px var(--color);padding:1px 0}.ring{background:#fff;border:1px solid #aaa;border-radius:.25em;bottom:0;box-shadow:0 0 0 0 rgba(255,255,255,0);left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:0}.input:focus+.ring{border-color:#777;box-shadow:0 0 0 .2em rgba(50,115,220,.25)}.input:hover+.ring{border-color:#777}:host([disabled]) .ring{background:#eee;border-color:#eee}:host([readonly]) .ring{background:#eee}.skeleton .input:hover+.ring,.skeleton .ring,.skeleton:hover .ring{background-color:#eee;border-color:#eee;cursor:progress}.skeleton .input,.skeleton .input::placeholder{color:transparent}.btn{background:0 0;border:none;display:block;font-family:inherit;font-size:unset;margin:.2em .2em .2em 0;padding:0;border-radius:.15em;cursor:pointer;flex-shrink:0;height:1.6em;width:1.6em;z-index:2}.btn:focus{box-shadow:0 0 0 .2em rgba(50,115,220,.25);outline:0}.btn:active,.btn:hover{box-shadow:none;outline:0}.btn:hover{background-color:#f5f5f5}.btn:active{background-color:#eee}:host([readonly]) .btn:hover{background-color:#e5e5e5}:host([readonly]) .btn:active{background-color:#ddd}.btn::-moz-focus-inner{border:0}.btn-img{box-sizing:border-box;filter:grayscale(100%);height:100%;padding:15%;width:100%}.btn-img:hover{filter:grayscale(0)}`]}}window.customElements.define("cc-input-text",p);export{p as CcInputText};
