import"./cc-expand-2cca00e2.js";import"./cc-loader-c874b32c.js";import"./cc-error-8d730ec3.js";import{L as e,h as t,a as s,w as n,c as a}from"./vendor-5e139a4e.js";import{t as r,i}from"./info-tiles-0fcdc9dd.js";function o(e,t,s,n){Array.from(e.querySelectorAll(t)).forEach((e=>e.animate(s,n)))}const c=[[{transform:"scale(1)"},{transform:"scale(0.9)"},{transform:"scale(1)"}],{duration:200,easing:"ease-in-out"}],l={running:new URL(new URL("assets/running-cada7a10.svg",import.meta.url).href,import.meta.url).href,deploying:new URL(new URL("assets/starting-3ce177c7.svg",import.meta.url).href,import.meta.url).href},u={running:[],deploying:[]};class d extends e{static get properties(){return{error:{type:Boolean,reflect:!0},instances:{type:Object}}}constructor(){super(),this.error=!1}_getStatusLabel(e){return"running"===e?"Running":"deploying"===e?"Deploying":void 0}render(){const e=null==this.instances,s=e&&!this.error,n=e?u:this.instances,a=n.running.map((e=>e.count)).reduce(((e,t)=>e+t),0),r=n.deploying.map((e=>e.count)).reduce(((e,t)=>e+t),0),i=!e&&!this.error&&0===a&&0===r;return this._lastRunningCount!==a&&this.updateComplete.then((()=>{o(this.shadowRoot,".instances[data-type=running] .count-bubble",...c),this._lastRunningCount=a})),this._lastDeployingCount!==r&&this.updateComplete.then((()=>{o(this.shadowRoot,".instances[data-type=deploying] .count-bubble",...c),this._lastDeployingCount=r})),t`<div class=tile_title>Instances</div>${this.error||i?"":t`<div class=tile_body><cc-expand>${this._renderInstances(n.running,"running")} ${this._renderInstances(n.deploying,"deploying")}</cc-expand>${s?t`<cc-loader></cc-loader>`:""}</div>`} ${i?t`<div class=tile_message>No instances. Your app is stopped.</div>`:""} ${this.error?t`<cc-error class=tile_message>Something went wrong while loading instances.</cc-error>`:""}`}_renderInstances(e,n){return e.length?t`<div class="${s({"cc-waiting":"deploying"===n})} instances" data-type=${n}><img class=instances_status-img src=${l[n]} alt=""> <span class=instances_status>${this._getStatusLabel(n)}</span> ${e.map((({flavorName:e,count:s})=>t`<span class=size-label>${e}<span class=count-bubble>${s}</span></span>`))}</div>`:""}static get styles(){return[r,i,n,a`cc-expand{width:100%}.instances{align-items:center;display:flex;width:100%}.instances[data-type=running]{--status-color:#2faa60}.instances[data-type=deploying]{--status-color:#2b96fd}.instances_status-img{height:1.75rem;width:1.75rem}.instances_status{color:var(--status-color);flex:1 1 0;font-size:1.2rem;margin-left:.25rem}.size-label{margin:var(--bubble-r);position:relative}.count-bubble{background-color:var(--status-color);bottom:calc(var(--bubble-d)/ -2);position:absolute;right:calc(var(--bubble-d)/ -2)}`]}}window.customElements.define("cc-tile-instances",d);export{d as CcTileInstances};
