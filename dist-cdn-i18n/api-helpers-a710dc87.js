import{p as e,s as n,a as i,b as a,O as t}from"./send-to-api-d26c0c41.js";import{g as o}from"./product-857e3fb7.js";import{b as s}from"./utils-e732f1fc.js";function r(e){const n=null==e.id?"/self":`/organisations/${e.id}`;return Promise.resolve({method:"get",url:`/v2${n}/applications/${e.appId}/exposed_env`,headers:{Accept:"application/json"}})}function c(e,n){const i=null==e.id?"/self":`/organisations/${e.id}`;return Promise.resolve({method:"put",url:`/v2${i}/applications/${e.appId}/exposed_env`,headers:{Accept:"application/json","Content-Type":"application/json"},body:n})}function u(e){return Promise.resolve({method:"get",url:`/v4/billing/organisations/${e.id}/invoices/${e.invoiceNumber}${e.type}`,headers:{Accept:"application/json"}})}function l({apiConfig:e,signal:i,ownerId:a,appId:t}){return function(e){const n=null==e.id?"/self":`/organisations/${e.id}`;return Promise.resolve({method:"get",url:`/v2${n}/applications/${e.appId}`,headers:{Accept:"application/json"}})}({id:a,appId:t}).then(n({apiConfig:e,signal:i}))}async function p({apiConfig:e,signal:i,ownerId:a,invoiceNumber:t}){return u({id:a,invoiceNumber:t,type:""}).then(n({apiConfig:e,signal:i})).then((n=>g(e,a,n)))}async function d({apiConfig:e,signal:i,ownerId:a,invoiceNumber:t}){return u({id:a,invoiceNumber:t,type:".html"}).then(n({apiConfig:e,signal:i}))}async function m({apiConfig:i,signal:a,ownerId:t}){return(o={id:t,since:"2010-08-01T00:00:00.000Z"},Promise.resolve({method:"get",url:`/v4/billing/organisations/${o.id}/invoices`,headers:{Accept:"application/json"},queryParams:e(o,["since"])})).then(n({apiConfig:i,signal:a})).then((e=>s(e,(async e=>g(i,t,e)))));var o}async function g(e,n,i){return{number:i.invoice_number,emissionDate:i.emission_date,type:i.type||"INVOICE",status:i.status,total:{amount:i.total_tax.amount+i.total_tax_excluded.amount,currency:i.total_tax_excluded.currency},downloadUrl:await f(e,n,i.invoice_number),paymentUrl:h(n,i.invoice_number)}}function f(e,n,t){return u({id:n,invoiceNumber:t,type:".pdf"}).then(i(e.API_HOST)).then(a(e)).then((e=>{const n=new URL(e.url);return n.searchParams.set("authorization",btoa(e.headers.Authorization)),n.toString()}))}function h(e,n){return null==e||e.startsWith("user_")?`/users/me/invoices/${n}`:`/organisations/${e}/invoices/${n}`}function v({signal:i,zoneId:a}){return(o={zone_id:a},Promise.resolve({method:"get",url:"/v4/billing/price-system",headers:{Accept:"application/json"},queryParams:e(o,["zone_id"])})).then(n({signal:i,cacheDelay:t}));var o}function y(e){return Promise.resolve({method:"get",url:`/v4/saas/grafana/${e.id}`,headers:{Accept:"application/json"}})}function $(e){return Promise.resolve({method:"post",url:`/v4/saas/grafana/${e.id}`,headers:{Accept:"application/json"}})}function b(e){return Promise.resolve({method:"delete",url:`/v4/saas/grafana/${e.id}`,headers:{Accept:"application/json"}})}function j(e){return Promise.resolve({method:"post",url:`/v4/saas/grafana/${e.id}/reset`,headers:{Accept:"application/json"}})}async function _({signal:e}){return o().then(n({signal:e,cacheDelay:t}))}export{m as a,p as b,d as c,_ as d,v as e,l as f,r as g,b as h,y as i,$ as j,j as r,c as u};
