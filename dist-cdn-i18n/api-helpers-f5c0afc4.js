import{a as e}from"./application-e1aa8d7f.js";import{p as n,O as a}from"./request.fetch-17efde15.js";import{s as i,p as t,a as s}from"./send-to-api-3f46dae0.js";import{b as o}from"./utils-aa566623.js";function r(e){return Promise.resolve({method:"get",url:`/v4/billing/organisations/${e.id}/invoices/${e.invoiceNumber}${e.type}`,headers:{Accept:"application/json"}})}function c({apiConfig:n,signal:a,ownerId:t,appId:s}){return e({id:t,appId:s}).then(i({apiConfig:n,signal:a}))}async function u({apiConfig:e,signal:n,ownerId:a,invoiceNumber:t}){return r({id:a,invoiceNumber:t,type:""}).then(i({apiConfig:e,signal:n})).then((n=>d(e,a,n)))}async function p({apiConfig:e,signal:n,ownerId:a,invoiceNumber:t}){return r({id:a,invoiceNumber:t,type:".html"}).then(i({apiConfig:e,signal:n}))}async function l({apiConfig:e,signal:a,ownerId:t}){return(s={id:t,since:"2010-08-01T00:00:00.000Z"},Promise.resolve({method:"get",url:`/v4/billing/organisations/${s.id}/invoices`,headers:{Accept:"application/json"},queryParams:n(s,["since"])})).then(i({apiConfig:e,signal:a})).then((n=>o(n,(async n=>d(e,t,n)))));var s}async function d(e,n,a){return{number:a.invoice_number,emissionDate:a.emission_date,type:a.type||"INVOICE",status:a.status,total:{amount:a.total_tax.amount+a.total_tax_excluded.amount,currency:a.total_tax_excluded.currency},downloadUrl:await m(e,n,a.invoice_number),paymentUrl:f(n,a.invoice_number)}}function m(e,n,a){return r({id:n,invoiceNumber:a,type:".pdf"}).then(t(e.API_HOST)).then(s(e)).then((e=>{const n=new URL(e.url);return n.searchParams.set("authorization",btoa(e.headers.Authorization)),n.toString()}))}function f(e,n){return null==e||e.startsWith("user_")?`/users/me/invoices/${n}`:`/organisations/${e}/invoices/${n}`}function g({signal:e,zoneId:t}){return(s={zone_id:t},Promise.resolve({method:"get",url:"/v4/billing/price-system",headers:{Accept:"application/json"},queryParams:n(s,["zone_id"])})).then(i({signal:e,cacheDelay:a}));var s}function h(e){return Promise.resolve({method:"get",url:`/v4/saas/grafana/${e.id}`,headers:{Accept:"application/json"}})}function v(e){return Promise.resolve({method:"post",url:`/v4/saas/grafana/${e.id}`,headers:{Accept:"application/json"}})}function y(e){return Promise.resolve({method:"delete",url:`/v4/saas/grafana/${e.id}`,headers:{Accept:"application/json"}})}function b(e){return Promise.resolve({method:"post",url:`/v4/saas/grafana/${e.id}/reset`,headers:{Accept:"application/json"}})}function P(e){return Promise.resolve({method:"get",url:`/v4/stats/organisations/${e.id}/resources/${e.appId}/metrics?interval=P1D&span=PT1H&only=cpu&only=mem`,headers:{Accept:"application/json"}})}export{l as a,u as b,v as c,y as d,p as e,c as f,h as g,g as h,P as i,b as r};
