import{s as e}from"./i18n-bf531c19.js";import"./cc-loader-c874b32c.js";import"./cc-block-section-d9dd6090.js";import"./cc-block-4351d64f.js";import"./cc-error-8d730ec3.js";import{L as t,d as i,h as a,c as s}from"./vendor-5e139a4e.js";import{c as r,l as o}from"./cc-link-bb132771.js";const n=()=>e`This dashboard includes several graphs about an add-on. <br> First, it displays a panel containing system metrics like <strong>CPU, memory, disks and network</strong>. <br> For <strong>MySQL, PostgreSQL, MongoDB and Redis</strong> add-ons, a second panel will contain databases data and provides information like <strong>connections count, queries or transactions, errors or deadlocks and tuples operations<strong>.`,c=()=>e`This dashboard includes several graphs about a Clever Cloud organisation. <br> It provides a graph summarizing the amount of <strong>deployed application runtimes and add-ons</strong>. It also provides the number of services <strong>by type</strong> or <strong>by plan (flavor)</strong>. <br> The <strong>state graph</strong> indicates a state for all deployments performed during the elapsed Grafana time interval. <br> And finally on this dashboard you will retrieve <strong>global and specific links</strong> (sorted by requests count) to access an application runtime or add-on dashboard.`,l=()=>e`This dashboard features an <strong>overview panel</strong> to get quick information about an application, as well as several panels about its system metrics. <br> It provides several graphs summarizing the state of <strong>CPU, memory, disks and network</strong>. <br> For each of these metric types, you will retrieve usage graphs, gauges, as well as the result of a simple linear prediction done on the elapsed Grafana time interval. This linear prediction yields the expected duration for the metric to reach 90%.`,d=new URL(new URL("assets/info-fd0d98fe.svg",import.meta.url).href,import.meta.url).href;class h extends t{static get properties(){return{error:{type:String},link:{type:String},status:{type:String},waiting:{type:String}}}constructor(){super(),this.error=!1,this.link=null,this.status=null,this.waiting=!1}_getDashboards(){return[{title:"Organisation dashboard preview",url:"https://static-assets.cellar.services.clever-cloud.com/grafana/screens/home.png",description:c,alt:"Screenshot of an organisation dashboard in Grafana"},{title:"Application runtime dashboard preview",url:"https://static-assets.cellar.services.clever-cloud.com/grafana/screens/runtime.png",description:l,alt:"Screenshot of an application runtime dashboard in Grafana"},{title:"Add-on dashboard preview",url:"https://static-assets.cellar.services.clever-cloud.com/grafana/screens/addon.png",description:n,alt:"Screenshot of an add-on dashboard in Grafana"}]}_onEnableSubmit(){i(this,"enable")}_onResetSubmit(){i(this,"reset")}_onDisableSubmit(){i(this,"disable")}render(){const e="enabling"===this.waiting||"disabling"===this.waiting,t=!1!==this.error||!1!==this.waiting,i="loading"!==this.error&&null==this.status,s="loading"!==this.error&&"disabled"===this.status,o="loading"!==this.error&&"enabled"===this.status;return a`<cc-block><div slot=title>Metrics in Grafana</div>${e?a`<cc-loader slot=overlay></cc-loader>`:""}<cc-block-section><div slot=title>Documentation</div><div slot=info>This service is used to visualize the our metrics data. You can find the documentation and details about those metrics here.</div><div>${r("https://www.clever-cloud.com/doc/administrate/metrics/overview/",a`<cc-img src=${d}></cc-img><span>Read the documentation</span>`)}</div></cc-block-section>${"loading"===this.error?a`<cc-block-section><div slot=title>Grafana</div><div slot=info></div><div><cc-error>Something went wrong while loading Grafana state.</cc-error></div></cc-block-section>`:""} ${i?a`<cc-block-section><div slot=title>Grafana</div><div><cc-loader></cc-loader></div></cc-block-section>`:""} ${s?a`<cc-block-section><div slot=title>Enable Grafana</div><div slot=info><p>Enabling Grafana will create and provide all accesses to a Grafana organisation.</p></div>${"enabling"===this.error?a`<cc-error>Something went wrong while enabling Grafana dashboards.</cc-error>`:a`<div><cc-button success ?skeleton=${this._skeleton} ?disabled=${t} @cc-button:click=${this._onEnableSubmit}>Enable Grafana</cc-button></div>`}</cc-block-section>`:""} ${o?a`<cc-block-section><div slot=title>Grafana</div><div slot=info><p>Link to the Grafana which contains Clever Cloud metrics dashboards.</p></div>${"link-grafana"===this.error||null==this.link?a`<cc-error>Something went wrong while loading Grafana link.</cc-error>`:a`<div>${r(this.link,a`<cc-img src=https://static-assets.cellar.services.clever-cloud.com/logos/grafana.svg></cc-img><span>Open Grafana</span>`)}</div>`}</cc-block-section><cc-block-section><div slot=title>Reset all dashboards</div><div slot=info>Reset all Clever Cloud dashboards to their initial state.</div>${"resetting"===this.error?a`<cc-error>Something went wrong while resetting Grafana dashboards.</cc-error>`:a`<div><cc-button primary ?skeleton=${this._skeleton} ?disabled=${t} ?waiting=${"resetting"===this.waiting} @cc-button:click=${this._onResetSubmit}>Reset all dashboards</cc-button></div>`}</cc-block-section>`:""} ${e?"":a`${this._getDashboards().map((e=>a`<cc-block-section><div slot=title>${e.title}</div><div slot=info>${e.description}</div><div>${r(e.url,a`<img class=dashboard-screenshot src=${e.url} alt=${e.alt}>`)}</div></cc-block-section>`))}`} ${o?a`<cc-block-section><div slot=title>Disable Grafana</div><div slot=info>Disabling Grafana will delete and end all accesses to this Grafana organisation. You will still be able to create another one.</div>${"disabling"===this.error?a`<cc-error>Something went wrong while disabling Grafana dashboards.</cc-error>`:a`<div><cc-button danger delay=3 ?skeleton=${this._skeleton} ?disabled=${t} @cc-button:click=${this._onDisableSubmit}>Disable Grafana</cc-button></div>`}</cc-block-section>`:""}</cc-block>`}static get styles(){return[o,s`:host{display:block}cc-img{border-radius:.25em;flex:0 0 auto;height:1.5em;margin-right:.5em;width:1.5em}.cc-link{align-items:center;display:inline-flex}.dashboard-screenshot{border-radius:.25em;max-width:50em;width:100%}p{margin:0}br{display:block;margin:.5em 0}cc-error.warning{margin-top:1em}`]}}window.customElements.define("cc-grafana-info",h);export{h as CcGrafanaInfo};
