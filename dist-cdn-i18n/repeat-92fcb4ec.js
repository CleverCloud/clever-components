import{T as e}from"./lit-element-98ed46d4.js";import{e as t,i as s,t as r}from"./directive-de55b00a.js";import{m as l,u as o,r as i,p as n,s as f}from"./directive-helpers-34e7fc26.js";const u=(e,t,s)=>{const r=new Map;for(let l=t;l<=s;l++)r.set(e[l],l);return r},c=t(class extends s{constructor(e){if(super(e),e.type!==r.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,s){let r;void 0===s?s=t:void 0!==t&&(r=t);const l=[],o=[];let i=0;for(const t of e)l[i]=r?r(t,i):i,o[i]=s(t,i),i++;return{values:o,keys:l}}render(e,t,s){return this.dt(e,t,s).values}update(t,[s,r,c]){var d;const h=l(t),{values:a,keys:p}=this.dt(s,r,c);if(!Array.isArray(h))return this.ht=p,a;const v=null!==(d=this.ht)&&void 0!==d?d:this.ht=[],m=[];let y,x,g=0,j=h.length-1,b=0,k=a.length-1;for(;g<=j&&b<=k;)if(null===h[g])g++;else if(null===h[j])j--;else if(v[g]===p[b])m[b]=o(h[g],a[b]),g++,b++;else if(v[j]===p[k])m[k]=o(h[j],a[k]),j--,k--;else if(v[g]===p[k])m[k]=o(h[g],a[k]),i(t,m[k+1],h[g]),g++,k--;else if(v[j]===p[b])m[b]=o(h[j],a[b]),i(t,h[g],h[j]),j--,b++;else if(void 0===y&&(y=u(p,b,k),x=u(v,g,j)),y.has(v[g]))if(y.has(v[j])){const e=x.get(p[b]),s=void 0!==e?h[e]:null;if(null===s){const e=i(t,h[g]);o(e,a[b]),m[b]=e}else m[b]=o(s,a[b]),i(t,h[g],s),h[e]=null;b++}else n(h[j]),j--;else n(h[g]),g++;for(;b<=k;){const e=i(t,m[k+1]);o(e,a[b]),m[b++]=e}for(;g<=j;){const e=h[g++];null!==e&&n(e)}return this.ht=p,f(t,m),e}});export{c};
