<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Document</title>
  <style>
  html,
  body {
    margin: 0;
  }

  body {
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    margin: 1em;
  }

  body > * {
    margin-bottom: 1em;
  }

  cc-tile-instances {
    max-width: 22em;
  }
  </style>
  <script type="module">

  const searchParams = new URL(location.href).searchParams;

  const lang = searchParams.get('lang');
  if (lang !== 'none') {
    Promise
      .all([
        import('/src/lib/i18n.js'),
        import('/src/translations/translations.' + lang + '.js'),
      ])
      .then(([{ addTranslations, setLanguage }, { lang, translations }]) => {
        addTranslations(lang, translations);
        setLanguage(lang);
      });
  }

  const componentName = searchParams.get('component');
  import(`/src/components/${componentName}/${componentName}.js`);
  import((`/src/components/${componentName}/${componentName}.variants.js`)).then(({ variants }) => {
    const $fragment = document.createDocumentFragment();
    for (const properties of variants) {
      const $component = document.createElement(componentName);
      for (const [name, value] of Object.entries(properties)) {
        $component[name] = value;
      }
      $fragment.appendChild($component);
    }

    document.body.appendChild($fragment);
  });

  </script>
</head>
<body>
</body>
</html>
